pergunta,qtd_retries,em,ex,cs,ts,qas,sql_esperado,sql_final_executado,categoria,complexidade
Existe correlação entre a prioridade da iniciativa e o progresso médio de seus OKRs?,1,0,0,0.9834,0.5000,0.7417,"SELECT i.priority, AVG(kr.progress / NULLIF(kr.target, 0)) AS avg_progress FROM initiative i JOIN okr ON okr.initiative_id = i.id JOIN kr ON kr.okr_id = okr.id GROUP BY i.priority ORDER BY i.priority;","SELECT i.priority, AVG(kh.progress / NULLIF(kh.target, 0)) AS avg_progress FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr h ON o.id = h.okr_id JOIN kr_history kh ON h.id = kh.kr_id GROUP BY i.priority ORDER BY i.priority;",Alinhamento Estratégico,Média
Iniciativas com maior prioridade tendem a ter maior progresso médio nos OKRs?,1,0,0,0.9770,0.5000,0.7385,"SELECT i.priority, AVG(kr.progress / NULLIF(kr.target, 0)) AS avg_progress FROM initiative i JOIN okr ON okr.initiative_id = i.id JOIN kr ON kr.okr_id = okr.id GROUP BY i.priority ORDER BY i.priority;","SELECT i.priority, AVG(kh.progress / NULLIF(kh.target, 0)) AS avg_progress FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id JOIN kr_history kh ON k.id = kh.kr_id GROUP BY i.priority ORDER BY i.priority DESC;",Alinhamento Estratégico,Média
Qual é a relação entre prioridade da iniciativa e o desempenho médio dos seus OKRs?,1,0,0,0.9757,0.5000,0.7378,"SELECT i.priority, AVG(kr.progress / NULLIF(kr.target, 0)) AS avg_progress FROM initiative i JOIN okr ON okr.initiative_id = i.id JOIN kr ON kr.okr_id = okr.id GROUP BY i.priority ORDER BY i.priority;","SELECT i.priority, AVG(k.progress / NULLIF(k.target, 0)) AS avg_okr_progress FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id JOIN kr_history kh ON k.id = kh.kr_id GROUP BY i.priority ORDER BY i.priority;",Alinhamento Estratégico,Média
Iniciativas de qual categoria têm maior taxa de conclusão de KRs?,2,0,0,0.8228,,,"SELECT i.category, CAST(SUM(CASE WHEN (k.direction = 'up'   AND k.progress / NULLIF(k.target,0) >= 1) OR (k.direction = 'down' AND k.progress / NULLIF(k.target,0) <= 1) THEN 1 ELSE 0 END) AS FLOAT) / COUNT(k.id) AS completion_rate FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id GROUP BY i.category ORDER BY completion_rate DESC;","SELECT i.category, COUNT(i.id) AS num_krs, COUNT(DISTINCT kh.id) AS num_completed_krs, COUNT(DISTINCT kh.id) * 1.0 / COUNT(i.id) AS completion_rate FROM initiative i JOIN kr_history kh ON i.id = (SELECT initiative_id FROM initiative_managers WHERE managers_id = i.id) GROUP BY i.category ORDER BY completion_rate DESC;",Alinhamento Estratégico,Baixa
Qual categoria de iniciativa apresenta menor frequência de updates?,0,0,0,0.8449,0.1250,0.4849,"SELECT i.category, CAST(COUNT(iu.id) AS FLOAT) / COUNT(DISTINCT i.id) AS avg_updates_per_initiative FROM initiative i LEFT JOIN initiative_update iu ON i.id = iu.initiative_id GROUP BY i.category ORDER BY avg_updates_per_initiative ASC;","SELECT i.category, COUNT(*) AS update_frequency FROM initiative_update iu JOIN initiative i ON iu.initiative_id = i.id GROUP BY i.category ORDER BY update_frequency ASC LIMIT 1;",Alinhamento Estratégico,Baixa
Colaboradores com mais KRs favoritos têm desempenho melhor nos OKRs?,0,0,0,0.9298,0.1067,0.5182,"SELECT c.name, COUNT(k.id) AS total_bookmarked_krs, AVG(k.progress / NULLIF(k.target, 0)) AS avg_progress_of_bookmarked_krs FROM collaborator c JOIN kr k ON c.id = k.bookmarked_by_id GROUP BY c.id, c.name ORDER BY total_bookmarked_krs DESC;","SELECT c.name, COUNT(kh.id) AS num_krs_favoritos, AVG(k.progress / NULLIF(k.target, 0)) AS avg_progress FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id JOIN kr k ON kh.kr_id = k.id WHERE k.bookmarked = TRUE GROUP BY c.id, c.name ORDER BY avg_progress DESC LIMIT 10;",Alinhamento Estratégico,Baixa
Há diferença de progresso médio entre KRs do tipo “YES_NO” e “NUMERIC”?,0,0,0,0.8548,0.5000,0.6774,"SELECT k.metric, AVG(k.progress / NULLIF(k.target, 0)) AS average_progress FROM kr k WHERE k.metric IN ('YES_NO', 'NUMERIC') GROUP BY k.metric;","SELECT metric, AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr GROUP BY metric HAVING COUNT(DISTINCT direction) > 1",Alinhamento Estratégico,Baixa
Quais iniciativas concentram mais KRs com métrica percentual?,0,0,0,0.8833,0.0000,0.4417,"SELECT i.title, COUNT(k.id) AS total_percentage_krs FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id WHERE k.metric = 'PERC' GROUP BY i.id, i.title ORDER BY total_percentage_krs DESC;","SELECT i.category, COUNT(k.id) AS num_krs FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id WHERE k.metric = 'PERC' GROUP BY i.category ORDER BY num_krs DESC;",Alinhamento Estratégico,Baixa
Qual a média de progresso dos OKRs de iniciativas de alta prioridade?,2,0,0,0.8768,,,"SELECT AVG(k.progress / NULLIF(k.target, 0)) AS average_okr_progress_high_priority FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id WHERE i.priority = 1;","SELECT AVG(iu.brutal_facts / NULLIF(iu.target,0)) AS avg_progress FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id WHERE i.priority = 'high'",Alinhamento Estratégico,Baixa
Qual o impacto dos updates de iniciativa no progresso dos KRs associados?,0,0,0,0.6620,0.0000,0.3310,"WITH normalized_history AS (SELECT kh.kr_id, kh.date, (kh.progress / NULLIF(k.target,0)) AS rel_progress, LAG(kh.progress / NULLIF(k.target,0)) OVER (PARTITION BY kh.kr_id ORDER BY kh.date) AS rel_before FROM kr_history kh JOIN kr k ON k.id = kh.kr_id), updates AS (SELECT initiative_id, created_date FROM initiative_update), link AS (SELECT nh.kr_id, nh.rel_progress, nh.rel_before, nh.date AS progress_date, (SELECT iu.created_date FROM initiative_update iu JOIN kr k ON iu.initiative_id = k.okr_id JOIN okr o ON k.okr_id = o.id WHERE iu.initiative_id = o.initiative_id AND iu.created_date < nh.date ORDER BY iu.created_date DESC LIMIT 1) AS last_update FROM normalized_history nh JOIN kr k ON nh.kr_id = k.id JOIN okr o ON k.okr_id = o.id) SELECT AVG(rel_progress - rel_before) AS avg_progress_change_after_update FROM link WHERE rel_before IS NOT NULL AND last_update IS NOT NULL;","SELECT iu.initiative_id, iu.created_date, iu.last_modified_date, iu.brutal_facts, iu.highlights, iu.next_steps, iu.year_month, k.progress, k.target FROM initiative_update iu JOIN kr k ON iu.initiative_id = k.okr_id WHERE iu.initiative_id IN (SELECT initiative_id FROM initiative_update GROUP BY initiative_id HAVING COUNT(*) > 1);",Alinhamento Estratégico,Alta
Há aumento no ritmo de updates próximo aos deadlines dos OKRs?,2,0,0,0.7846,0.1360,0.4603,"SELECT o.id AS okr_id, o.deadline, SUM(CASE WHEN iu.created_date BETWEEN o.deadline - INTERVAL '30 days' AND o.deadline THEN 1 ELSE 0 END) AS updates_last_30_days, SUM(CASE WHEN iu.created_date < o.deadline - INTERVAL '30 days' THEN 1 ELSE 0 END) AS updates_before_30_days FROM okr o LEFT JOIN initiative_update iu ON iu.initiative_id = o.initiative_id AND iu.created_date <= o.deadline GROUP BY o.id, o.deadline ORDER BY o.deadline;","SELECT o.deadline, iu.year_month, COUNT(iu.id) AS num_updates FROM okr o JOIN initiative_update iu ON o.id = iu.initiative_id WHERE iu.created_date > o.deadline - INTERVAL '1 month' GROUP BY o.deadline, iu.year_month ORDER BY o.deadline;",Alinhamento Estratégico,Média
Qual é o alinhamento entre as datas de fim de iniciativa e deadlines de OKRs?,0,0,0,0.6942,0.0000,0.3471,"SELECT CASE WHEN o.deadline < i.end_date THEN 'OKR ANTES da Iniciativa' WHEN o.deadline = i.end_date THEN 'OKR e Iniciativa na MESMA DATA' WHEN o.deadline > i.end_date THEN 'OKR DEPOIS da Iniciativa' ELSE 'Sem data de fim para Iniciativa' END AS alinhamento, COUNT(o.id) AS total_okrs FROM okr o JOIN initiative i ON o.initiative_id = i.id GROUP BY alinhamento;","SELECT i.end_date, o.deadline, i.id AS initiative_id, o.id AS okr_id FROM initiative i JOIN okr o ON i.id = o.initiative_id WHERE i.end_date = o.deadline;",Alinhamento Estratégico,Média
Quantos OKRs estão diretamente vinculados a iniciativas prioritárias (por categoria) e quantos ainda não possuem ligação clara com uma iniciativa?,1,0,0,0.7836,0.0000,0.3918,"SELECT COALESCE(i.category, 'SEM INICIATIVA') AS category, COALESCE(i.priority, -1) AS priority, COUNT(o.id) AS okrs_count FROM okr o LEFT JOIN initiative i ON o.initiative_id = i.id GROUP BY category, priority ORDER BY category, priority;","SELECT COUNT(*) AS okrs_linked, COUNT(o.id) - COUNT(i.id) AS okrs_not_linked FROM okr o LEFT JOIN initiative i ON o.initiative_id = i.id WHERE i.priority = 1;",Alinhamento Estratégico,Média
Quantas atualizações de iniciativas foram registradas neste trimestre e quais são os principais temas dos “highlights” e “brutal facts”?,2,0,0,0.8138,,,"SELECT COUNT(iu.id) AS total_updates_trimestre, STRING_AGG(iu.highlights, ' | ') AS todos_highlights, STRING_AGG(iu.brutal_facts, ' | ') AS todos_brutal_facts FROM initiative_update iu WHERE iu.created_date >= date_trunc('quarter', CURRENT_DATE) AND iu.created_date < date_trunc('quarter', CURRENT_DATE) + interval '3 month';","SELECT COUNT(*) AS num_updates, array_agg(DISTINCT h) AS highlights_themes, array_agg(DISTINCT bf) AS brutal_facts_themes FROM (SELECT REGEXP_SPLIT_TO_TABLE(highlights, '\s+') AS h, REGEXP_SPLIT_TO_TABLE(brutal_facts, '\s+') AS bf FROM initiative_update) AS subquery WHERE EXTRACT(QUARTER FROM last_modified_date) = EXTRACT(QUARTER FROM CURRENT_DATE) GROUP BY h, bf;",Alinhamento Estratégico,Média
"Apresentar os KRs com maior desvio padrão de progresso ao longo do histórico, indicando instabilidade.",0,0,0,0.8044,0.0004,0.4024,"SELECT k.title, o.description AS okr_description, STDDEV(kh.progress / NULLIF(kh.target, 0)) AS desvio_padrao_progresso FROM kr_history kh JOIN kr k ON kh.kr_id = k.id JOIN okr o ON k.okr_id = o.id GROUP BY kh.kr_id, k.title, o.description HAVING COUNT(kh.id) > 1 ORDER BY desvio_padrao_progresso DESC;","SELECT k.* FROM kr k JOIN kr_history kh ON k.id = kh.kr_id GROUP BY k.id ORDER BY STDDEV(kh.progress / NULLIF(kh.target,0)) DESC LIMIT 1;",Alinhamento Estratégico,Média
"Comparar o progresso médio dos KRs com o progresso médio das iniciativas às quais estão vinculados, destacando as maiores variações.",2,0,0,0.8008,0.0029,0.4019,"WITH InitiativeProgress AS (SELECT i.id AS initiative_id, AVG(k.progress / NULLIF(k.target, 0)) AS avg_initiative_progress FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id GROUP BY i.id), CalculatedVariance AS (SELECT k.title AS kr_title, (k.progress / NULLIF(k.target, 0)) AS kr_current_progress, ip.avg_initiative_progress, (k.progress / NULLIF(k.target, 0)) - ip.avg_initiative_progress AS progress_variance FROM kr k JOIN okr o ON k.okr_id = o.id JOIN InitiativeProgress ip ON o.initiative_id = ip.initiative_id) SELECT kr_title, kr_current_progress, avg_initiative_progress, progress_variance FROM CalculatedVariance ORDER BY ABS(progress_variance) DESC;","WITH kr_progress AS (SELECT metric, direction, AVG(progress / NULLIF(target, 0)) AS avg_kr_progress FROM kr GROUP BY metric, direction), initiative_progress AS (SELECT okr_id, AVG(progress / NULLIF(target, 0)) AS avg_initiative_progress FROM kr GROUP BY okr_id) SELECT kr.metric, kr.direction, kr_progress.avg_kr_progress, initiative_progress.avg_initiative_progress, ABS(kr_progress.avg_kr_progress - initiative_progress.avg_initiative_progress) AS variation FROM kr JOIN kr_progress ON kr.metric = kr_progress.metric AND kr.direction = kr_progress.direction JOIN initiative_progress ON kr.okr_id = initiative_progress.okr_id ORDER BY variation DESC;",Alinhamento Estratégico,Alta
Construir o ranking das categorias de iniciativa com base no progresso médio ponderado pelo número de KRs associados.,2,0,0,0.9070,,,"SELECT i.category, AVG(k.progress / NULLIF(k.target, 0)) AS weighted_average_progress, COUNT(k.id) AS total_krs FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id GROUP BY i.category ORDER BY weighted_average_progress DESC;","WITH kr_count AS (SELECT initiative_id, COUNT(*) AS kr_count FROM kr GROUP BY initiative_id), kr_progress AS (SELECT initiative_id, AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr GROUP BY initiative_id) SELECT i.category, i.id, i.title, kp.avg_progress, kc.kr_count, (kc.kr_count * kp.avg_progress) / (SELECT SUM(kc2.kr_count) FROM kr_count kc2) AS weighted_avg_progress FROM initiative i JOIN kr_progress kp ON i.id = kp.initiative_id JOIN kr_count kc ON i.id = kc.initiative_id ORDER BY weighted_avg_progress DESC;",Alinhamento Estratégico,Baixa
Avaliar a correlação entre o número de updates registrados em cada iniciativa e o progresso médio de seus KRs.,1,0,0,0.8162,0.0000,0.4081,"WITH InitiativeMetrics AS (SELECT i.id AS initiative_id, COUNT(iu.id) AS total_updates, (SELECT AVG(k.progress / NULLIF(k.target,0)) FROM okr o JOIN kr k ON o.id = k.okr_id WHERE o.initiative_id = i.id) AS average_kr_progress FROM initiative i LEFT JOIN initiative_update iu ON i.id = iu.initiative_id GROUP BY i.id) SELECT CORR(im.total_updates, im.average_kr_progress) AS correlation_updates_vs_progress FROM InitiativeMetrics im;","SELECT i.id, i.title, COUNT(iu.id) AS num_updates, AVG(kh.progress / NULLIF(kh.target,0)) AS avg_progress FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id JOIN kr k ON i.id = k.okr_id JOIN kr_history kh ON k.id = kh.kr_id GROUP BY i.id, i.title ORDER BY avg_progress DESC;",Alinhamento Estratégico,Alta
Detectar iniciativas que apresentaram regressão média no progresso de KRs durante o último ciclo.,2,0,0,0.7776,,,"WITH hist AS (SELECT kh.kr_id, (kh.progress / NULLIF(kh.target,0)) AS rel, LAG(kh.progress / NULLIF(kh.target,0)) OVER (PARTITION BY kh.kr_id ORDER BY kh.date) AS prev, o.initiative_id FROM kr_history kh JOIN kr k ON kh.kr_id = k.id JOIN okr o ON k.okr_id = o.id), diffs AS (SELECT initiative_id, rel - prev AS diff FROM hist WHERE prev IS NOT NULL) SELECT i.title, AVG(diff) AS avg_regression_change FROM diffs d JOIN initiative i ON d.initiative_id = i.id GROUP BY i.id, i.title HAVING AVG(diff) < 0 ORDER BY avg_regression_change ASC;","WITH regression_krs AS (SELECT i.id, i.title, i.category, kh.date, AVG(kh.progress / NULLIF(kh.target, 0)) OVER (PARTITION BY i.id ORDER BY kh.date ROWS BETWEEN 1 PRECEDING AND CURRENT ROW) AS prev_avg_progress, AVG(kh.progress / NULLIF(kh.target, 0)) AS avg_progress FROM kr_history kh JOIN kr k ON kh.kr_id = k.id JOIN initiative i ON k.okr_id = i.id WHERE kh.date >= (SELECT MAX(date) - INTERVAL '1 year' FROM kr_history) GROUP BY i.id, i.title, i.category, kh.date), regression_initiatives AS (SELECT id, title, category, date, avg_progress, prev_avg_progress, CASE WHEN avg_progress < prev_avg_progress THEN 1 ELSE 0 END AS is_regression FROM regression_krs) SELECT id, title, category, avg_progress, prev_avg_progress, is_regression FROM regression_initiatives WHERE is_regression = 1;",Alinhamento Estratégico,Alta
Qual a distribuição de iniciativas por categoria?,0,0,0,0.7004,0.6667,0.6835,"SELECT category, COUNT(id) AS total_initiatives, CAST(COUNT(id) AS FLOAT) * 100 / (SELECT COUNT(*) FROM initiative) AS percentage FROM initiative GROUP BY category ORDER BY total_initiatives DESC;","SELECT i.category, COUNT(*) AS count_in_category FROM initiative i GROUP BY i.category ORDER BY i.category;",Execução,Baixa
Quais iniciativas têm mais OKRs associados?,0,0,0,0.9614,1.0000,0.9807,"SELECT i.title, COUNT(o.id) AS total_okrs FROM initiative i LEFT JOIN okr o ON i.id = o.initiative_id GROUP BY i.id, i.title ORDER BY total_okrs DESC;","SELECT i.title, COUNT(o.id) AS num_okrs FROM initiative i JOIN okr o ON i.id = o.initiative_id GROUP BY i.id, i.title ORDER BY num_okrs DESC;",Execução,Baixa
Quantas iniciativas estão em andamento neste trimestre?,0,0,1,0.8664,1.0000,0.9332,"SELECT COUNT(id) FROM initiative WHERE start_date <= date_trunc('quarter', CURRENT_DATE) + INTERVAL '3 month' - INTERVAL '1 second' AND (end_date IS NULL OR end_date >= date_trunc('quarter', CURRENT_DATE));",SELECT COUNT(*) FROM initiative WHERE start_date <= CURRENT_DATE AND end_date >= CURRENT_DATE - INTERVAL '3 month',Execução,Baixa
Quais iniciativas estão sem updates há mais de 30 dias?,0,0,0,0.7979,0.0034,0.4006,"SELECT i.title, MAX(iu.created_date) AS last_update FROM initiative i LEFT JOIN initiative_update iu ON i.id = iu.initiative_id GROUP BY i.id, i.title HAVING MAX(iu.created_date) IS NULL OR MAX(iu.created_date) < NOW() - INTERVAL '30' DAY ORDER BY last_update ASC;",SELECT i.* FROM initiative i LEFT JOIN initiative_update iu ON i.id = iu.initiative_id WHERE iu.initiative_id IS NULL OR (iu.initiative_id IS NOT NULL AND (iu.created_date + INTERVAL '30 days') < CURRENT_TIMESTAMP);,Execução,Média
"Quais iniciativas têm prioridade máxima, mas baixo progresso de OKRs?",2,0,0,0.7211,,,"SELECT i.title, i.priority, AVG(k.progress / NULLIF(k.target, 0)) AS avg_okr_progress FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id WHERE i.priority = 1 GROUP BY i.id, i.title, i.priority HAVING AVG(k.progress / NULLIF(k.target, 0)) < 0.5 ORDER BY avg_okr_progress ASC;","SELECT i.* FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN initiative_update iu ON o.id = iu.initiative_id WHERE iu.year_month = (SELECT MAX(year_month) FROM initiative_update) AND (iu.brutal_facts / NULLIF(iu.target, 0)) < 0.5;",Execução,Média
Quantas iniciativas estão planejadas para começar no próximo mês?,0,0,1,0.8851,1.0000,0.9425,"SELECT COUNT(id) FROM initiative WHERE start_date >= date_trunc('month', CURRENT_DATE) + INTERVAL '1 month' AND start_date < date_trunc('month', CURRENT_DATE) + INTERVAL '2 month';",SELECT COUNT(*) AS count FROM initiative WHERE start_date >= CURRENT_DATE + INTERVAL '1 month',Execução,Baixa
Quais iniciativas têm fim previsto antes do término de seus OKRs?,2,0,0,0.7018,,,"SELECT i.title, i.end_date, MAX(o.deadline) AS latest_okr_deadline FROM initiative i JOIN okr o ON i.id = o.initiative_id WHERE i.end_date IS NOT NULL GROUP BY i.id, i.title, i.end_date HAVING i.end_date < MAX(o.deadline);",SELECT i.* FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id WHERE iu.year_month < i.end_date::timestamp;,Execução,Média
Quais iniciativas têm mais de três pessoas no time?,0,0,1,0.8875,1.0000,0.9438,"SELECT i.id, i.title, COUNT(im.managers_id) AS team_size FROM initiative i JOIN initiative_managers im ON i.id = im.initiative_id GROUP BY i.id HAVING COUNT(im.managers_id) > 3",SELECT i.* FROM initiative i JOIN initiative_managers im ON i.id = im.initiative_id JOIN collaborator c ON im.managers_id = c.id GROUP BY i.id HAVING COUNT(c.id) > 3;,Execução,Média
Qual é a média de duração (em dias) das iniciativas concluídas?,0,0,0,0.8883,0.0000,0.4442,SELECT AVG(EXTRACT(EPOCH FROM (end_date - start_date)) / 86400) AS average_duration_days FROM initiative WHERE end_date IS NOT NULL AND start_date IS NOT NULL;,SELECT AVG(EXTRACT(DAY FROM (i.end_date - i.start_date))) AS avg_duration_in_days FROM initiative i WHERE i.end_date IS NOT NULL AND i.end_date > i.start_date;,Execução,Baixa
Qual percentual de iniciativas por categoria está concluído?,0,0,0,0.7370,0.2500,0.4935,"WITH InitiativeKRStatus AS (SELECT i.id AS initiative_id, i.category, CASE WHEN (k.direction = 'up'   AND k.progress / NULLIF(k.target,0) >= 1) OR (k.direction = 'down' AND k.progress / NULLIF(k.target,0) <= 1) THEN 1 ELSE 0 END AS kr_is_concluded FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id) SELECT category, CAST(SUM(kr_is_concluded) AS FLOAT) * 100 / COUNT(*) AS percent_krs_concluded FROM InitiativeKRStatus GROUP BY category ORDER BY percent_krs_concluded DESC;","SELECT i.category, COUNT(i.id) AS total_iniciativas, COUNT(CASE WHEN i.end_date IS NOT NULL THEN i.id ELSE NULL END) AS iniciativas_concluidas, ROUND((COUNT(CASE WHEN i.end_date IS NOT NULL THEN i.id ELSE NULL END) * 100.0) / COUNT(i.id), 2) AS percentual_concluido FROM initiative i GROUP BY i.category ORDER BY i.category;",Execução,Média
"Quais iniciativas estão com maior prioridade, mas apresentam baixo progresso ou atualizações atrasadas?",0,0,0,0.7461,0.0022,0.3742,"WITH InitiativePerformance AS (SELECT i.id AS initiative_id, i.title, i.priority, (SELECT AVG(k.progress / NULLIF(k.target,0)) FROM okr o JOIN kr k ON o.id = k.okr_id WHERE o.initiative_id = i.id) AS avg_okr_progress, (SELECT MAX(created_date) FROM initiative_update iu WHERE iu.initiative_id = i.id) AS last_update_date FROM initiative i) SELECT title, priority, avg_okr_progress, last_update_date FROM InitiativePerformance WHERE priority = 1 AND (avg_okr_progress < 0.5 OR last_update_date < NOW() - INTERVAL '30 days' OR last_update_date IS NULL) ORDER BY avg_okr_progress ASC NULLS FIRST, last_update_date ASC NULLS FIRST;","SELECT i.title, i.priority, i.end_date, i.start_date, i.category, i.description, i.created_by, i.last_modified_by, i.id FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id WHERE i.priority = (SELECT MAX(priority) FROM initiative) AND (iu.last_modified_date IS NULL OR iu.last_modified_date < i.start_date OR (iu.last_modified_date IS NOT NULL AND iu.last_modified_date < (CURRENT_TIMESTAMP - INTERVAL '1 month')));",Execução,Alta
Quais KRs estão com direção “NEGATIVA” (indicando desempenho decrescente) e estão abaixo de 50% do target?,0,0,0,0.8349,0.0113,0.4231,"SELECT title, progress, target, direction FROM kr WHERE direction = 'down' AND (progress / NULLIF(target,0)) < 0.5;","SELECT k.* FROM kr k JOIN kr_history kh ON k.id = kh.kr_id WHERE k.direction = 'down' AND (kh.progress / NULLIF(kh.target, 0)) < 0.5;",Execução,Baixa
Quais iniciativas apresentaram maior variação positiva de progresso nos últimos ciclos de atualização?,2,0,0,0.7389,,,"WITH NormHist AS (SELECT kh.kr_id, kh.date, (kh.progress / NULLIF(kh.target,0)) AS norm_prog FROM kr_history kh), Changes AS (SELECT nh.kr_id, nh.date, nh.norm_prog, nh.norm_prog - LAG(nh.norm_prog) OVER (PARTITION BY nh.kr_id ORDER BY nh.date) AS delta FROM NormHist nh), PosChanges AS (SELECT o.initiative_id, CASE WHEN k.direction = 'up'   AND delta > 0 THEN delta WHEN k.direction = 'down' AND delta < 0 THEN -delta END AS norm_delta FROM Changes c JOIN kr k ON c.kr_id = k.id JOIN okr o ON k.okr_id = o.id WHERE delta IS NOT NULL AND c.date >= NOW() - INTERVAL '6 month' AND ((k.direction='up' AND delta > 0) OR (k.direction='down' AND delta < 0))) SELECT i.title, AVG(pc.norm_delta) AS avg_positive_change FROM initiative i JOIN PosChanges pc ON i.id = pc.initiative_id GROUP BY i.id, i.title ORDER BY avg_positive_change DESC;","WITH last_update AS (SELECT initiative_id, MAX(last_modified_date) AS last_update_date FROM initiative_update GROUP BY initiative_id), variação AS ( SELECT i.id, i.title, i.category, SUM(CASE WHEN kh.progress > kh.prev_progress THEN kh.progress - kh.prev_progress ELSE 0 END) OVER (PARTITION BY i.id ORDER BY kh.date ROWS BETWEEN 1 PRECEDING AND 1 FOLLOWING) / (SELECT COUNT(*) FROM kr_history WHERE initiative_id = i.id) AS variação_positiva FROM initiative i JOIN kr_history kh ON i.id = kh.initiative_id JOIN kr h ON kh.kr_id = h.id WHERE kh.date = (SELECT last_update_date FROM last_update WHERE initiative_id = i.id) GROUP BY i.id, i.title, i.category, h.id, h.progress, h.prev_progress, kh.date ORDER BY i.id, kh.date ) SELECT i.id, i.title, i.category, variação_positiva FROM initiative i JOIN variação v ON i.id = v.id ORDER BY variação_positiva DESC LIMIT 10",Execução,Alta
Quais colaboradores foram responsáveis pelos KRs com melhor taxa de atingimento?,2,0,0,0.7220,0.0565,0.3893,"SELECT c.name, AVG(k.progress / k.target) AS avg_achievement_rate FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id JOIN kr k ON kh.kr_id = k.id GROUP BY c.id, c.name HAVING COUNT(DISTINCT k.id) > 1 ORDER BY avg_achievement_rate DESC;","SELECT c.name, COUNT(kr.id) AS num_krs, SUM(CASE WHEN (kh.progress / NULLIF(kh.target, 0)) >= 1 THEN 1 ELSE 0 END) AS num_krs_atendidos FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id JOIN kr ON kh.kr_id = kr.id GROUP BY c.id, c.name ORDER BY num_krs_atendidos DESC LIMIT 10;",Execução,Média
Quais colaboradores têm progresso médio de KRs acima da média geral dos colaboradores?,0,0,0,0.8812,1.0000,0.9406,"WITH CollaboratorAvg AS (SELECT kh.collaborator_id, AVG(kh.progress / NULLIF(kh.target,0)) AS collaborator_progress FROM kr_history kh GROUP BY kh.collaborator_id), GlobalAvg AS (SELECT AVG(progress / NULLIF(target,0)) AS global_progress FROM kr_history) SELECT c.name, ca.collaborator_progress FROM collaborator c JOIN CollaboratorAvg ca ON c.id = ca.collaborator_id CROSS JOIN GlobalAvg ga WHERE ca.collaborator_progress > ga.global_progress ORDER BY ca.collaborator_progress DESC;","SELECT c.name, AVG(kh.progress / NULLIF(kh.target, 0)) AS avg_progress FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id JOIN kr k ON kh.kr_id = k.id GROUP BY c.id, c.name HAVING AVG(kh.progress / NULLIF(kh.target, 0)) > (SELECT AVG(progress / NULLIF(target, 0)) FROM kr_history);",Execução,Média
Quais colaboradores possuem mais KRs “bookmarked” do que a média geral de bookmarks por colaborador?,2,0,0,0.9111,,,"WITH BookmarkCount AS ( SELECT bookmarked_by_id, COUNT(id) AS total_bookmarks FROM kr WHERE bookmarked_by_id IS NOT NULL GROUP BY bookmarked_by_id ), AvgBookmarks AS ( SELECT AVG(total_bookmarks) AS global_avg FROM BookmarkCount ) SELECT c.name, bc.total_bookmarks FROM collaborator c JOIN BookmarkCount bc ON c.id = bc.bookmarked_by_id CROSS JOIN AvgBookmarks ab WHERE bc.total_bookmarks > ab.global_avg ORDER BY bc.total_bookmarks DESC;","SELECT c.name, COUNT(k.bookmarked) AS total_bookmarks FROM collaborator c JOIN kr k ON c.id = k.bookmarked_by_id JOIN kr_history kh ON k.id = kh.kr_id GROUP BY c.name HAVING COUNT(k.bookmarked) > (SELECT AVG(k.bookmarked) FROM kr WHERE bookmarked = TRUE)",Execução,Média
Gerar o ranking de colaboradores com maior média de progresso em KRs dentro de cada categoria de iniciativa.,0,1,1,1.0000,1.0000,1.0000,"SELECT i.category, c.name, AVG(kh.progress / NULLIF(kh.target,0)) AS avg_progress_in_category, RANK() OVER (PARTITION BY i.category ORDER BY AVG(kh.progress / NULLIF(kh.target,0)) DESC) AS rank_in_category FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id JOIN kr k ON kh.kr_id = k.id JOIN okr o ON k.okr_id = o.id JOIN initiative i ON o.initiative_id = i.id GROUP BY i.category, c.id, c.name ORDER BY i.category, rank_in_category;","SELECT i.category, c.name, AVG(kh.progress / NULLIF(kh.target,0)) AS avg_progress_in_category, RANK() OVER (PARTITION BY i.category ORDER BY AVG(kh.progress / NULLIF(kh.target,0)) DESC) AS rank_in_category FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id JOIN kr k ON kh.kr_id = k.id JOIN okr o ON k.okr_id = o.id JOIN initiative i ON o.initiative_id = i.id GROUP BY i.category, c.id, c.name ORDER BY i.category, rank_in_category;",Execução,Alta
Selecionar colaboradores que contribuíram para KRs com progresso superior ao percentil 90 global.,0,0,0,0.9035,0.0132,0.4584,"WITH GlobalPercentile AS (SELECT PERCENTILE_CONT(0.9) WITHIN GROUP (ORDER BY (progress / NULLIF(target,0))) AS p90_progress FROM kr_history) SELECT DISTINCT c.name FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id CROSS JOIN GlobalPercentile gp WHERE (kh.progress / NULLIF(kh.target,0)) > gp.p90_progress;","SELECT c.* FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id JOIN kr k ON kh.kr_id = k.id WHERE (kh.progress / NULLIF(kh.target,0)) > (SELECT PERCENTILE_CONT(0.9) WITHIN GROUP (ORDER BY (kh.progress / NULLIF(kh.target,0))) FROM kr_history kh JOIN kr k ON kh.kr_id = k.id);",Execução,Média
Como evoluiu o progresso médio dos KRs nos últimos 6 meses?,1,0,0,0.9082,0.0000,0.4541,"SELECT DATE_TRUNC('month', date) AS month_start, AVG(progress / NULLIF(target,0)) AS avg_monthly_progress FROM kr_history WHERE date >= DATE_TRUNC('month', NOW() - INTERVAL '6 month') AND date <= NOW() GROUP BY month_start ORDER BY month_start;","SELECT AVG(kh.progress / NULLIF(kh.target, 0)) AS avg_progress FROM kr_history kh WHERE kh.date >= NOW() - INTERVAL '6 month' GROUP BY kh.date ORDER BY kh.date DESC LIMIT 1;",Histórico e Tendências,Alta
Qual foi a variação de progresso por colaborador no último trimestre?,2,0,0,0.7782,,,"WITH Hist AS (SELECT kh.collaborator_id, kh.kr_id, kh.date, (kh.progress / NULLIF(kh.target,0)) AS norm_prog FROM kr_history kh WHERE kh.date >= NOW() - INTERVAL '3 month'), Ranked AS (SELECT collaborator_id, kr_id, norm_prog, ROW_NUMBER() OVER (PARTITION BY collaborator_id, kr_id ORDER BY date ASC) AS rn_first, ROW_NUMBER() OVER (PARTITION BY collaborator_id, kr_id ORDER BY date DESC) AS rn_last FROM Hist), FirstLast AS (SELECT collaborator_id, kr_id, MAX(CASE WHEN rn_first = 1 THEN norm_prog END) AS first_prog, MAX(CASE WHEN rn_last = 1 THEN norm_prog END) AS last_prog FROM Ranked GROUP BY collaborator_id, kr_id) SELECT c.name, AVG(last_prog - first_prog) AS progress_change_qtr FROM collaborator c JOIN FirstLast fl ON c.id = fl.collaborator_id GROUP BY c.id, c.name ORDER BY progress_change_qtr DESC;","SELECT c.name, c.id, SUM(kh.progress - kh.progress_lag) AS total_progress FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id WHERE kh.date >= NOW() - INTERVAL '3 months' GROUP BY c.name, c.id ORDER BY total_progress DESC;",Histórico e Tendências,Alta
Quantos registros de histórico de KR foram criados no último mês?,1,0,0,0.8922,1.0000,0.9461,SELECT COUNT(id) AS history_count_last_month FROM kr_history WHERE date >= NOW() - INTERVAL '1' MONTH;,SELECT COUNT(*) FROM kr_history WHERE date >= NOW() - INTERVAL '1 month';,Histórico e Tendências,Baixa
Quais KRs apresentaram regressão de progresso em algum momento?,0,0,0,0.6232,0.0049,0.3140,"WITH Regressions AS (SELECT kr_id, (progress / NULLIF(target,0)) AS norm_progress, LAG(progress / NULLIF(target,0)) OVER (PARTITION BY kr_id ORDER BY date) AS prev_norm_progress FROM kr_history) SELECT DISTINCT k.title FROM kr k JOIN Regressions r ON k.id = r.kr_id WHERE r.norm_progress < r.prev_norm_progress;",SELECT k.* FROM kr k JOIN kr_history kh ON k.id = kh.kr_id WHERE kh.progress < (SELECT AVG(progress) FROM kr_history WHERE kr_id = k.id) AND k.direction = 'down';,Histórico e Tendências,Média
"Qual a média de variação percentual de progresso por métrica (PERC, NUMERIC, YES_NO)?",0,0,0,0.7193,0.5000,0.6097,"WITH ranked_history AS (SELECT kh.kr_id, kh.date, (kh.progress / NULLIF(kh.target,0)) AS norm_prog, k.metric, LAG(kh.progress / NULLIF(kh.target,0)) OVER (PARTITION BY kh.kr_id ORDER BY kh.date) AS prev_norm_prog FROM kr_history kh JOIN kr k ON kh.kr_id = k.id), progress_changes AS (SELECT metric, ABS(norm_prog - prev_norm_prog) / NULLIF(prev_norm_prog, 0) * 100 AS variation_percent FROM ranked_history WHERE prev_norm_prog IS NOT NULL) SELECT metric, AVG(variation_percent) AS avg_variation_percent FROM progress_changes GROUP BY metric;","SELECT metric, AVG(progress / NULLIF(target, 0) - 1) * 100 AS avg_percent_variation FROM kr GROUP BY metric;",Histórico e Tendências,Alta
Quantos KRs tiveram histórico de progresso acima de 90% antes do prazo final?,1,0,0,0.8079,0.0000,0.4039,SELECT COUNT(DISTINCT kh.kr_id) as krs_acima_90 FROM kr_history kh JOIN kr k ON kh.kr_id = k.id JOIN okr o ON k.okr_id = o.id WHERE (kh.progress/k.target)*100 >= 90 AND kh.date < o.deadline;,"SELECT COUNT(*) FROM kr_history kh JOIN kr k ON kh.kr_id = k.id WHERE kh.progress / NULLIF(kh.target, 0) > 0.9 AND kh.date < (SELECT o.deadline FROM okr o WHERE o.id = k.okr_id);",Histórico e Tendências,Média
Quais colaboradores atualizaram o maior número de KRs no histórico?,0,0,0,0.8876,0.0333,0.4604,"SELECT c.id, c.name, COUNT(kh.id) as total_atualizacoes FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id GROUP BY c.id, c.name ORDER BY total_atualizacoes DESC LIMIT 10;","SELECT c.name, COUNT(kh.id) AS num_krs_updated FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id GROUP BY c.name ORDER BY num_krs_updated DESC LIMIT 1;",Histórico e Tendências,Baixa
Quantos updates de iniciativa foram registrados por mês neste ano?,0,0,0,0.9163,1.0000,0.9582,"SELECT EXTRACT(YEAR FROM created_date) as ano, EXTRACT(MONTH FROM created_date) as mes, COUNT(*) as total_updates FROM initiative_update WHERE EXTRACT(YEAR FROM created_date) = EXTRACT(YEAR FROM CURRENT_DATE) GROUP BY ano, mes ORDER BY ano, mes;","SELECT EXTRACT(YEAR FROM iu.created_date) AS year, EXTRACT(MONTH FROM iu.created_date) AS month, COUNT(*) AS updates FROM initiative_update iu WHERE EXTRACT(YEAR FROM iu.created_date) = EXTRACT(YEAR FROM CURRENT_DATE) GROUP BY year, month ORDER BY year, month;",Histórico e Tendências,Baixa
Quais iniciativas tiveram maior número de updates em um único mês?,2,0,0,0.9109,,,"SELECT i.id, i.title, EXTRACT(YEAR FROM iu.created_date) as ano, EXTRACT(MONTH FROM iu.created_date) as mes, COUNT(iu.id) as updates_mes FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id GROUP BY i.id, i.title, ano, mes ORDER BY updates_mes DESC LIMIT 10;","SELECT i.title, i.category, COUNT(iu.id) AS num_updates, EXTRACT(YEAR FROM iu.year_month::DATE) AS year, EXTRACT(MONTH FROM iu.year_month::DATE) AS month FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id GROUP BY i.title, i.category, EXTRACT(YEAR FROM iu.year_month::DATE), EXTRACT(MONTH FROM iu.year_month::DATE) ORDER BY num_updates DESC LIMIT 1;",Histórico e Tendências,Média
Qual o tempo médio entre updates consecutivos de uma mesma iniciativa?,0,0,0,0.7511,0.0000,0.3755,"WITH update_gaps AS (SELECT initiative_id, EXTRACT(EPOCH FROM (created_date - LAG(created_date) OVER (PARTITION BY initiative_id ORDER BY created_date))) / 86400 as dias_entre_updates FROM initiative_update) SELECT AVG(dias_entre_updates) as tempo_medio_dias FROM update_gaps WHERE dias_entre_updates IS NOT NULL;",SELECT AVG(iu1.last_modified_date - iu2.last_modified_date) AS avg_time_between_updates FROM initiative_update iu1 JOIN initiative_update iu2 ON iu1.initiative_id = iu2.initiative_id AND iu1.id < iu2.id,Histórico e Tendências,Média
"Para cada iniciativa, qual é o KR mais recente e seu progresso atual?",0,0,0,0.7863,0.0181,0.4022,"WITH ranked_krs AS (SELECT i.id as iniciativa_id, i.title as iniciativa, k.id as kr_id, k.title as kr, k.progress, k.last_modified_date, ROW_NUMBER() OVER (PARTITION BY i.id ORDER BY k.last_modified_date DESC) as rn FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id) SELECT iniciativa_id, iniciativa, kr_id, kr, progress FROM ranked_krs WHERE rn = 1;","SELECT i.title, k.progress, k.target, k.direction, k.created_date AS kr_created_date, k.id AS kr_id FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id JOIN kr k ON iu.id = k.id WHERE k.created_date = (SELECT MAX(created_date) FROM kr WHERE initiative_id = i.id) ORDER BY i.id;",Histórico e Tendências,Baixa
Analisar a tendência de redução na frequência de updates conforme o deadline dos OKRs se aproxima.,0,0,0,0.8159,0.1881,0.5020,"SELECT i.id, i.title, o.deadline, COUNT(iu.id) as total_updates, AVG(EXTRACT(EPOCH FROM (o.deadline - iu.created_date)) / 86400) as dias_antes_prazo_medio FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN initiative_update iu ON i.id = iu.initiative_id WHERE iu.created_date <= o.deadline GROUP BY i.id, i.title, o.deadline ORDER BY dias_antes_prazo_medio;","WITH okr_updates AS (SELECT i.id AS initiative_id, o.deadline, COUNT(iu.id) AS num_updates FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id JOIN okr o ON i.id = o.initiative_id GROUP BY i.id, o.deadline) SELECT deadline, num_updates, LAG(num_updates) OVER (ORDER BY deadline) AS prev_num_updates FROM okr_updates ORDER BY deadline;",Histórico e Tendências,Média
Listar KRs com lacunas maiores que 30 dias entre atualizações de progresso,2,0,0,0.7423,0.0098,0.3761,"WITH kr_update_gaps AS (SELECT kh.kr_id, k.title as kr_title, kh.date as current_date, LAG(kh.date) OVER (PARTITION BY kh.kr_id ORDER BY kh.date) as previous_date, EXTRACT(EPOCH FROM (kh.date - LAG(kh.date) OVER (PARTITION BY kh.kr_id ORDER BY kh.date))) / 86400 as dias_entre_atualizacoes FROM kr_history kh JOIN kr k ON kh.kr_id = k.id) SELECT kr_id, kr_title, previous_date, current_date, dias_entre_atualizacoes FROM kr_update_gaps WHERE dias_entre_atualizacoes > 30 ORDER BY dias_entre_atualizacoes DESC;","WITH kr_updates AS (SELECT kh.kr_id, date_trunc('day', kh.date) AS update_date, lag(date_trunc('day', kh.date)) OVER (PARTITION BY kh.kr_id ORDER BY kh.date) AS prev_update_date FROM kr_history kh) SELECT kh.* FROM kr_updates ku JOIN kr_history kh ON kh.kr_id = ku.kr_id WHERE (ku.prev_update_date IS NOT NULL AND (ku.update_date - ku.prev_update_date) > INTERVAL '30 days') OR (ku.prev_update_date IS NULL AND (ku.update_date - kh.date) > INTERVAL '30 days')",Histórico e Tendências,Média
Quais OKRs estão com prazo próximo do vencimento?,2,0,0,0.4917,,,"SELECT id, deadline FROM okr WHERE deadline BETWEEN NOW() AND NOW() + INTERVAL '7 days' ORDER BY deadline ASC;",SELECT o.* FROM okr o JOIN initiative i ON o.initiative_id = i.id JOIN initiative_update iu ON i.id = iu.initiative_id WHERE iu.year_month - o.created_date <= INTERVAL '1 month' AND iu.year_month - o.created_date >= INTERVAL '-1 month'::interval,Monitoramento / Desempenho,Baixa
Qual é a média de progresso dos KRs em cada OKR?,1,0,0,0.8137,0.6667,0.7402,"SELECT okr_id, AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr GROUP BY okr_id;","SELECT o.id, i.title, AVG(k.progress / NULLIF(k.target, 0)) AS avg_progress FROM okr o JOIN initiative i ON o.initiative_id = i.id JOIN kr k ON o.id = k.okr_id GROUP BY o.id, i.title ORDER BY o.id;",Monitoramento / Desempenho,Baixa
Quais OKRs têm menor progresso médio?,2,0,0,0.8626,,,"SELECT okr_id, AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr GROUP BY okr_id ORDER BY avg_progress ASC LIMIT 5;","SELECT o.id, o.title, AVG(kh.progress / NULLIF(kh.target,0)) AS avg_progress FROM okr o JOIN initiative i ON o.initiative_id = i.id JOIN kr_history kh ON i.id = kh.kr_id GROUP BY o.id, o.title ORDER BY avg_progress ASC LIMIT 1;",Monitoramento / Desempenho,Baixa
Qual é o percentual de KRs concluídos por iniciativa?,2,0,0,0.8532,0.0000,0.4266,"SELECT i.id AS initiative_id, SUM(CASE WHEN (k.direction = 'up'  AND k.progress / NULLIF(k.target,0) >= 1) OR (k.direction = 'down' AND k.progress / NULLIF(k.target,0) <= 1) THEN 1 ELSE 0 END) * 100.0 / COUNT(k.id) AS percent_completed FROM initiative i JOIN okr o ON o.initiative_id = i.id JOIN kr k ON k.okr_id = o.id GROUP BY i.id;","SELECT i.category, i.title, SUM(CASE WHEN (kh.progress / NULLIF(kh.target, 0)) >= 1.0 THEN 1 ELSE 0 END) / COUNT(*) * 100 AS percent_concluded FROM initiative i JOIN kr k ON i.id = k.okr_id JOIN kr_history kh ON k.id = kh.kr_id GROUP BY i.category, i.title ORDER BY i.category;",Monitoramento / Desempenho,Média
Qual o tempo médio restante até o deadline dos OKRs ativos?,2,0,0,0.9132,,,SELECT AVG(EXTRACT(EPOCH FROM (deadline - NOW())) / 86400) AS avg_days_remaining FROM okr WHERE deadline > NOW();,SELECT AVG(EXTRACT(EPOCH FROM (deadline - CURRENT_TIMESTAMP))) AS avg_time_remaining FROM okr WHERE active = true,Monitoramento / Desempenho,Baixa
Quais OKRs estão vinculados a iniciativas que já encerraram?,0,0,0,0.9355,0.1269,0.5312,"SELECT o.id AS okr_id, o.initiative_id, i.end_date FROM okr o JOIN initiative i ON o.initiative_id = i.id WHERE i.end_date IS NOT NULL AND i.end_date < NOW();",SELECT o.* FROM okr o JOIN initiative i ON o.initiative_id = i.id WHERE i.end_date IS NOT NULL;,Monitoramento / Desempenho,Baixa
Quantos KRs estão atrasados em relação à meta planejada?,1,0,0,0.7636,0.0000,0.3818,"SELECT COUNT(*) AS delayed_kr_count FROM kr k JOIN kr_history kh ON kh.kr_id = k.id AND kh.date = (SELECT MAX(h.date) FROM kr_history h WHERE h.kr_id = k.id) WHERE (k.direction = 'up'  AND k.progress / NULLIF(k.target,0) < 1) OR (k.direction = 'down' AND k.progress / NULLIF(k.target,0) > 1);","SELECT COUNT(*) FROM kr WHERE (progress / NULLIF(target, 0)) < 1 AND okr_id IN (SELECT id FROM okr WHERE deadline < CURRENT_TIMESTAMP)",Monitoramento / Desempenho,Média
Qual o progresso médio dos KRs de tipo “PERC” em comparação aos de tipo “NUMERIC”?,0,0,0,0.9061,0.2500,0.5780,"SELECT metric, AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr WHERE metric IN ('PERC', 'NUMERIC') GROUP BY metric;","WITH perc_avg AS (SELECT AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr WHERE metric = 'PERC'), numeric_avg AS (SELECT AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr WHERE metric = 'NUMERIC') SELECT perc_avg.avg_progress, numeric_avg.avg_progress FROM perc_avg, numeric_avg;",Monitoramento / Desempenho,Baixa
Quais OKRs têm maior número de KRs associados?,2,0,0,0.7656,0.1333,0.4495,"SELECT okr_id, COUNT(*) AS kr_count FROM kr GROUP BY okr_id ORDER BY kr_count DESC LIMIT 5;","SELECT o.id, o.description, COUNT(k.id) AS num_krs FROM okr o JOIN initiative i ON o.initiative_id = i.id JOIN kr k ON o.id = k.okr_id GROUP BY o.id, o.description ORDER BY num_krs DESC LIMIT 1;",Monitoramento / Desempenho,Baixa
Qual o percentual de KRs marcados como “bookmarked” pelos colaboradores?,0,0,0,0.8079,0.0000,0.4040,SELECT COUNT(*) FILTER (WHERE bookmarked) * 100.0 / COUNT(*) AS percent_bookmarked FROM kr;,SELECT CAST(SUM(CASE WHEN k.bookmarked THEN 1 ELSE 0 END) AS FLOAT) * 100 / COUNT(*) AS percentagem_bookmarked FROM kr k,Monitoramento / Desempenho,Baixa
Qual é o percentual médio de progresso dos KRs (Key Results) em relação às metas estabelecidas nos últimos três meses?,0,0,0,0.8958,0.0000,0.4479,"SELECT AVG(kh.progress / NULLIF(k.target, 0)) * 100 AS avg_progress_percent FROM kr k JOIN kr_history kh ON kh.kr_id = k.id WHERE kh.date >= NOW() - INTERVAL '3 months';","SELECT AVG(k.progress / NULLIF(k.target, 0)) AS avg_progress FROM kr k WHERE k.created_date >= NOW() - INTERVAL '3 month' AND k.direction = 'up';",Monitoramento / Desempenho,Média
Quais colaboradores têm mais KRs marcados como “bookmarked” (favoritos) e demonstram maior engajamento com os objetivos da empresa?,1,0,0,0.8228,0.1667,0.4947,"SELECT c.id, c.name, COUNT(k.id) AS bookmarked_kr_count FROM collaborator c JOIN kr k ON k.bookmarked_by_id = c.id AND k.bookmarked = true GROUP BY c.id, c.name ORDER BY bookmarked_kr_count DESC LIMIT 10;","SELECT c.name, COUNT(kh.id) AS num_bookmarked_krs, SUM(kh.progress) AS total_progress FROM collaborator c JOIN kr_history kh ON c.id = kh.collaborator_id JOIN kr k ON kh.kr_id = k.id WHERE k.bookmarked = TRUE GROUP BY c.id, c.name ORDER BY total_progress DESC LIMIT 10;",Monitoramento / Desempenho,Média
Qual é o tempo médio entre a criação de um OKR e a primeira atualização de progresso registrada?,0,0,0,0.7412,0.0000,0.3706,"SELECT AVG(EXTRACT(EPOCH FROM (kh.first_update - o.created_date)) / 86400) AS avg_days_to_first_update FROM okr o JOIN (SELECT k.okr_id, MIN(kh.date) AS first_update FROM kr k JOIN kr_history kh ON kh.kr_id = k.id GROUP BY k.okr_id) kh ON kh.okr_id = o.id;","SELECT AVG(oi.created_date - iu.created_date) AS avg_time_between_okr_and_first_update FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id JOIN okr oi ON i.id = oi.initiative_id WHERE iu.id = (SELECT MIN(id) FROM initiative_update WHERE initiative_id = i.id) GROUP BY i.id, oi.id",Monitoramento / Desempenho,Média
Quantos OKRs estão próximos do prazo final (deadline) e ainda não atingiram 80% de progresso?,1,0,0,0.5718,0.0000,0.2859,"SELECT COUNT(*) AS okrs_near_deadline_low_progress FROM ( SELECT o.id FROM okr o JOIN kr k ON k.okr_id = o.id WHERE o.deadline BETWEEN NOW() AND NOW() + INTERVAL '7 days' GROUP BY o.id HAVING AVG(k.progress / NULLIF(k.target, 0)) < 0.8 ) sub;",SELECT COUNT(*) FROM initiative i JOIN okr o ON i.id = o.initiative_id WHERE o.deadline < NOW() AND (SELECT AVG(progress) FROM kr WHERE okr_id = o.id) < 0.8;,Monitoramento / Desempenho,Média
Quais iniciativas possuem OKRs cujo progresso médio supera o progresso médio global de todas as iniciativas da mesma categoria?,1,0,0,0.9159,0.0000,0.4579,"WITH initiative_avg AS (SELECT i.id, i.category, AVG(k.progress / NULLIF(k.target, 0)) AS avg_progress FROM initiative i JOIN okr o ON o.initiative_id = i.id JOIN kr k ON k.okr_id = o.id GROUP BY i.id, i.category), category_avg AS (SELECT category, AVG(avg_progress) AS category_avg_progress FROM initiative_avg GROUP BY category) SELECT ia.id, ia.category, ia.avg_progress FROM initiative_avg ia JOIN category_avg ca ON ia.category = ca.category WHERE ia.avg_progress > ca.category_avg_progress;","WITH avg_progress AS (SELECT i.category, AVG(kh.progress / NULLIF(kh.target, 0)) AS avg_progress FROM kr_history kh JOIN kr k ON kh.kr_id = k.id JOIN okr o ON k.okr_id = o.id JOIN initiative i ON o.initiative_id = i.id GROUP BY i.category), avg_global_progress AS (SELECT AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr) SELECT i.* FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.initiative_id = i.id JOIN kr_history kh ON k.id = kh.kr_id WHERE i.category IN (SELECT category FROM avg_progress) AND (kh.progress / NULLIF(kh.target, 0)) > (SELECT avg_progress FROM avg_global_progress);",Monitoramento / Desempenho,Alta
Qual colaborador teve o maior aumento percentual de progresso médio de KRs entre o último e o penúltimo mês?,1,0,0,0.9000,0.0000,0.4500,"WITH monthly_progress AS (SELECT collaborator_id, DATE_TRUNC('month', date) AS month, AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr_history GROUP BY collaborator_id, month), ranked_progress AS (SELECT *, ROW_NUMBER() OVER (PARTITION BY collaborator_id ORDER BY month DESC) AS rn FROM monthly_progress), last_two_months AS (SELECT p1.collaborator_id, p1.avg_progress AS last_month_progress, p2.avg_progress AS prev_month_progress, CASE WHEN p2.avg_progress = 0 THEN NULL ELSE ((p1.avg_progress - p2.avg_progress) / p2.avg_progress) * 100 END AS pct_increase FROM ranked_progress p1 JOIN ranked_progress p2 ON p1.collaborator_id = p2.collaborator_id WHERE p1.rn = 1 AND p2.rn = 2) SELECT collaborator_id, pct_increase FROM last_two_months ORDER BY pct_increase DESC LIMIT 1;","WITH last_month AS (SELECT kh.collaborator_id, AVG(kh.progress / NULLIF(kh.target, 0)) AS avg_progress FROM kr_history kh WHERE EXTRACT(MONTH FROM kh.date) = EXTRACT(MONTH FROM CURRENT_DATE) - 1 GROUP BY kh.collaborator_id), penult_month AS (SELECT kh.collaborator_id, AVG(kh.progress / NULLIF(kh.target, 0)) AS avg_progress FROM kr_history kh WHERE EXTRACT(MONTH FROM kh.date) = EXTRACT(MONTH FROM CURRENT_DATE) - 2 GROUP BY kh.collaborator_id), progress_diff AS (SELECT lm.collaborator_id, ((lm.avg_progress - pm.avg_progress) / pm.avg_progress) * 100 AS progress_diff FROM last_month lm JOIN penult_month pm ON lm.collaborator_id = pm.collaborator_id) SELECT c.name, pd.progress_diff FROM collaborator c JOIN progress_diff pd ON c.id = pd.collaborator_id ORDER BY pd.progress_diff DESC LIMIT 1;",Monitoramento / Desempenho,Alta
Quais iniciativas tiveram pelo menos um KR com progresso superior a 100% em algum ponto do histórico?,2,0,0,0.8409,0.0000,0.4205,"SELECT DISTINCT i.id, i.title FROM initiative i JOIN okr o ON o.initiative_id = i.id JOIN kr k ON k.okr_id = o.id JOIN kr_history kh ON kh.kr_id = k.id WHERE kh.progress / NULLIF(kh.target, 0) > 1;",SELECT i.* FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id JOIN kr_history kh ON iu.initiative_id = kh.kr_id JOIN kr k ON kh.id = k.id WHERE kh.progress > k.target;,Monitoramento / Desempenho,Baixa
Qual é o tempo médio (em dias) entre atualizações consecutivas de um mesmo KR no histórico?,2,0,0,0.8544,,,"WITH diffs AS (SELECT kr_id, date, LEAD(date) OVER (PARTITION BY kr_id ORDER BY date) AS next_date FROM kr_history) SELECT AVG(EXTRACT(EPOCH FROM (next_date - date)) / 86400) AS avg_days_between_updates FROM diffs WHERE next_date IS NOT NULL;",SELECT AVG(EXTRACT(EPOCH FROM (kh2.created_date - kh1.created_date)) / 86400) AS avg_time_between_updates FROM kr_history kh1 JOIN kr_history kh2 ON kh1.kr_id = kh2.kr_id AND kh1.id < kh2.id,Monitoramento / Desempenho,Alta
Quais iniciativas têm pelo menos dois OKRs com deadlines no mesmo mês?,1,0,0,0.7541,0.0181,0.3861,"SELECT initiative_id FROM okr GROUP BY initiative_id, DATE_TRUNC('month', deadline) HAVING COUNT(*) >= 2;",SELECT i.* FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id WHERE EXTRACT(MONTH FROM o.deadline) = EXTRACT(MONTH FROM o.deadline) GROUP BY i.id HAVING COUNT(DISTINCT o.deadline) >= 2;,Monitoramento / Desempenho,Média
Qual é a distribuição percentual de KRs por tipo de métrica dentro de cada iniciativa?,2,0,0,0.8623,0.1810,0.5216,"WITH kr_counts AS (SELECT i.id AS initiative_id, k.metric, COUNT(*) AS count FROM initiative i JOIN okr o ON o.initiative_id = i.id JOIN kr k ON k.okr_id = o.id GROUP BY i.id, k.metric), initiative_totals AS (SELECT initiative_id, SUM(count) AS total FROM kr_counts GROUP BY initiative_id) SELECT kc.initiative_id, kc.metric, (kc.count::float / it.total) * 100 AS percent FROM kr_counts kc JOIN initiative_totals it ON kc.initiative_id = it.initiative_id ORDER BY kc.initiative_id, percent DESC;","SELECT i.title, k.metric, COUNT(k.id) AS kr_count, ROUND(COUNT(k.id) * 100.0 / (SELECT COUNT(*) FROM kr k2 JOIN initiative i2 ON k2.okr_id = i2.id WHERE i2.id = i.id), 2) AS kr_percent FROM kr k JOIN initiative i ON k.okr_id = i.id GROUP BY i.title, k.metric, i.id ORDER BY i.title, k.metric;",Monitoramento / Desempenho,Média
Listar os KRs cujo progresso atual está abaixo da média dos KRs do mesmo tipo e direção.,0,1,1,1.0000,1.0000,1.0000,"WITH avg_progress AS (SELECT metric, direction, AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr GROUP BY metric, direction) SELECT k.* FROM kr k JOIN avg_progress ap ON k.metric = ap.metric AND k.direction = ap.direction WHERE (k.progress / NULLIF(k.target, 0)) < ap.avg_progress;","WITH avg_progress AS (SELECT metric, direction, AVG(progress / NULLIF(target, 0)) AS avg_progress FROM kr GROUP BY metric, direction) SELECT k.* FROM kr k JOIN avg_progress ap ON k.metric = ap.metric AND k.direction = ap.direction WHERE (k.progress / NULLIF(k.target, 0)) < ap.avg_progress;",Monitoramento / Desempenho,Média
"Identificar iniciativas que mantêm registros de atualização em meses consecutivos, sem interrupções.",0,0,0,0.7621,0.0833,0.4227,"WITH updates_months AS (SELECT initiative_id, DATE_TRUNC('month', created_date) AS month FROM initiative_update GROUP BY initiative_id, month), consecutive AS (SELECT initiative_id, month, LAG(month) OVER (PARTITION BY initiative_id ORDER BY month) AS prev_month FROM updates_months), gaps AS (SELECT initiative_id, COUNT(*) FILTER (WHERE prev_month IS NOT NULL AND month - INTERVAL '1 month' <> prev_month) AS gap_count, COUNT(month) AS total_months FROM consecutive GROUP BY initiative_id) SELECT initiative_id FROM gaps WHERE gap_count = 0 AND total_months > 1;",SELECT i.* FROM initiative i JOIN initiative_update u ON i.id = u.initiative_id WHERE u.year_month >= (SELECT MIN(year_month) FROM initiative_update WHERE initiative_id = i.id) AND u.year_month <= (SELECT MAX(year_month) FROM initiative_update WHERE initiative_id = i.id) GROUP BY i.id HAVING COUNT(DISTINCT u.year_month) = (SELECT COUNT(DISTINCT year_month) FROM initiative_update WHERE initiative_id = i.id);,Monitoramento / Desempenho,Alta
"Calcular a taxa média de crescimento mensal do progresso dos KRs, segmentada por tipo de métrica.",2,0,0,0.8346,,,"WITH monthly_kr_progress AS (SELECT kr_id, metric, DATE_TRUNC('month', date) AS month, AVG(progress / NULLIF(target,0)) AS avg_progress FROM kr_history GROUP BY kr_id, metric, month), monthly_growth AS (SELECT kr_id, metric, month, avg_progress, LAG(avg_progress) OVER (PARTITION BY kr_id ORDER BY month) AS prev_avg_progress FROM monthly_kr_progress), growth_rate AS (SELECT metric, AVG(CASE WHEN prev_avg_progress IS NOT NULL THEN (avg_progress - prev_avg_progress) / NULLIF(prev_avg_progress,0) ELSE NULL END) AS avg_monthly_growth_rate FROM monthly_growth GROUP BY metric) SELECT metric, avg_monthly_growth_rate FROM growth_rate;","SELECT metric, AVG(progress / NULLIF(target, 0) - LAG(progress / NULLIF(target, 0), 1, 0) OVER (PARTITION BY metric ORDER BY EXTRACT(MONTH FROM date))) AS avg_monthly_growth FROM kr GROUP BY metric ORDER BY metric;",Monitoramento / Desempenho,Alta
Detectar iniciativas que apresentaram regressão média no progresso de seus KRs durante o último ciclo de atualização.,2,0,0,0.7479,,,"WITH last_two_updates AS (SELECT kh.kr_id, i.id AS initiative_id, kh.date, ROW_NUMBER() OVER (PARTITION BY kh.kr_id ORDER BY kh.date DESC) AS rn, kh.progress / NULLIF(k.target, 0) AS relative_progress FROM kr_history kh JOIN kr k ON kh.kr_id = k.id JOIN okr o ON k.okr_id = o.id JOIN initiative i ON o.initiative_id = i.id), progress_diff AS (SELECT a.initiative_id, AVG(a.relative_progress - b.relative_progress) AS avg_progress_change FROM last_two_updates a JOIN last_two_updates b ON a.kr_id = b.kr_id AND a.rn = 1 AND b.rn = 2 GROUP BY a.initiative_id) SELECT initiative_id FROM progress_diff WHERE avg_progress_change < 0;","WITH regressao AS (SELECT i.id, i.category, AVG(kh.progress / NULLIF(kh.target, 0)) - LAG(AVG(kh.progress / NULLIF(kh.target, 0))) OVER (PARTITION BY i.id ORDER BY kh.year_month) AS regressao_media FROM initiative i JOIN initiative_update iu ON i.id = iu.initiative_id JOIN kr_history kh ON iu.id = kh.initiative_update_id WHERE iu.year_month = (SELECT MAX(year_month) FROM initiative_update) GROUP BY i.id, i.category), regressao_maior AS (SELECT id, MAX(regressao_media) AS maior_regressao FROM regressao GROUP BY id) SELECT r.id, r.category, r.maior_regressao FROM regressao_maior r JOIN regressao rr ON r.id = rr.id AND r.maior_regressao = rr.regressao_media WHERE r.maior_regressao < 0;",Monitoramento / Desempenho,Alta
"Apontar iniciativas cujos OKRs estão vencidos, mas cujo progresso médio permanece abaixo de 80%.",1,0,0,0.8949,0.0312,0.4630,"SELECT i.id AS initiative_id FROM initiative i JOIN okr o ON o.initiative_id = i.id JOIN kr k ON k.okr_id = o.id WHERE o.deadline < NOW() GROUP BY i.id HAVING AVG(k.progress / NULLIF(k.target, 0)) < 0.8;","SELECT i.* FROM initiative i JOIN okr o ON i.id = o.initiative_id JOIN kr k ON o.id = k.okr_id JOIN kr_history kh ON k.id = kh.kr_id WHERE o.deadline <= CURRENT_DATE AND (k.progress / NULLIF(k.target, 0)) < 0.8 GROUP BY i.id, i.title, i.category, o.id, o.deadline HAVING AVG(kh.progress / NULLIF(kh.target, 0)) < 0.8;",Monitoramento / Desempenho,Média
Identificar KRs com direção “NEGATIVA” que mantêm melhora contínua e atingem o target definido.,0,0,0,0.8199,0.0054,0.4126,"WITH kr_direction AS (SELECT k.id AS kr_id, k.target, k.direction FROM kr k WHERE k.direction = 'down'), history AS (SELECT kh.kr_id, kh.date, (kh.progress / NULLIF(kd.target, 0)) AS relative_progress, LAG(kh.progress / NULLIF(kd.target, 0)) OVER (PARTITION BY kh.kr_id ORDER BY kh.date) AS prev_progress FROM kr_history kh JOIN kr_direction kd ON kd.kr_id = kh.kr_id), fully_improving AS (SELECT kr_id FROM history GROUP BY kr_id HAVING COUNT(*) FILTER (WHERE prev_progress IS NOT NULL AND relative_progress >= prev_progress) = COUNT(*) - 1), achieved AS (SELECT kr_id FROM (SELECT kh.kr_id, (kh.progress / NULLIF(k.target,0)) AS relative_progress, ROW_NUMBER() OVER (PARTITION BY kh.kr_id ORDER BY kh.date DESC) AS rn FROM kr_history kh JOIN kr k ON k.id = kh.kr_id WHERE k.direction = 'down') last_value WHERE rn = 1 AND relative_progress <= 1) SELECT DISTINCT kr_id FROM fully_improving JOIN achieved USING(kr_id);","SELECT k.* FROM kr k JOIN kr_history kh ON k.id = kh.kr_id WHERE k.direction = 'down' AND kh.progress / NULLIF(kh.target, 0) = 1.0 AND kh.progress >= kh.target;",Monitoramento / Desempenho,Alta